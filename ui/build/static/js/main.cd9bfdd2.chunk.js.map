{"version":3,"sources":["helpers/data.helpers.ts","services/http.service.ts","services/config.service.ts","components/app.context.ts","components/withContext/withContext.comp.tsx","components/loader/loader.comp.tsx","components/button/button.comp.tsx","components/table/table.comp.tsx","components/cards/cards.comp.tsx","components/formRow/formRow.comp.tsx","components/queryParams/queryParams.comp.tsx","components/popup/popup.comp.tsx","helpers/file.helpers.ts","components/formPopup/formPopup.comp.tsx","components/filterField/filterField.comp.tsx","components/page/page.comp.tsx","components/navigation/navigation.comp.tsx","components/customStyles/customStyles.comp.tsx","components/app.tsx","serviceWorker.ts","index.tsx"],"names":["dataHelpers","data","dataPath","attr","extractedData","digProps","split","prop","field","type","arrayType","HttpService","baseUrl","unauthorizedRedirectUrl","errorMessageDataPath","requestHeaders","this","url","indexOf","rawData","outputUrl","Object","keys","forEach","key","urlParamName","replace","queryParams","length","replaceParamsInUrl","params","param","name","value","urlReplaceOnly","push","firstSeparator","join","reqUrl","urlIsAbsolute","origUrl","buildUrl","method","headers","assign","body","undefined","res","errorMessage","json","path","dataAtPath","extractDataByDataPath","status","statusText","redirectUrl","encodeURIComponent","document","location","href","Error","getErrorMessage","responseType","fetch","ok","text","handleError","buildRequest","makeRequest","httpService","HTTPService","endsWith","import","default","getRemoteConfig","config","isValid","AppContext","React","createContext","activePage","error","setError","setActivePage","withAppContext","Component","props","Consumer","context","Loader","className","Button","color","children","Table","items","fields","callbacks","customActions","map","label","item","rowIdx","fieldIdx","origField","src","alt","target","rel","style","backgroundColor","renderTableCell","put","onClick","call","title","aria-hidden","action","idx","icon","delete","Cards","cardIdx","renderRow","FormRow","direction","showReset","onChange","useState","optionSources","setOptionSources","pageHeaders","renderArrayItems","originalField","array","itemIdx","inputField","renderFieldInput","fieldName","updatedArray","localValue","splice","removeItemToFieldArray","aria-label","e","preventDefault","addItemToFieldArray","changeCallback","inputProps","defaultPlaceholder","placeholder","disabled","readonly","required","checked","optionSource","a","async","actualMethod","result","optionSourceData","option","valuePath","displayPath","display","toast","message","loadOptionSourceFromRemote","sortBy","finalOptions","options","sortedOptions","orderBy","valueAsNumber","accept","originalName","QueryParams","initialParams","submitCallback","setQueryParams","submit","formChanged","submitAfterChange","updatedQueryParams","useEffect","onSubmit","queryParam","Fragment","portalRoot","getElementById","createElement","setAttribute","append","PortalPopup","el","componentDidMount","appendChild","componentWillUnmount","removeChild","ReactDOM","createPortal","Popup","_handleKeyDown","show","closeCallback","keyCode","ref","refCallback","addEventListener","bind","removeEventListener","fileHelpers","fieldIndex","flatten","require","unflatten","FormPopup","getSingleConfig","methodConfig","fieldsCopy","JSON","parse","stringify","loading","setLoading","formFields","setFormFields","finalRawData","setFinalRawData","submitForm","finalObject","includeOriginalFields","formData","FormData","containFiles","isMultipartForm","validationError","checkIfFieldIsObject","fileInput","querySelector","files","firstFile","success","updatedFormFields","console","flattenData","initFormFields","FilterField","toLowerCase","Page","page","useParams","useHistory","pageMethods","methods","getAllConfig","getAll","getSingle","postConfig","post","putConfig","deleteConfig","openedPopup","setOpenedPopup","setItems","filter","setFilter","openEditPopup","updateItem","openCustomActionPopup","performAction","extractQueryParams","parsedParams","QueryString","search","decodeURIComponent","getAllRequest","dataTransform","Array","isArray","orderedItems","addItem","deleteItem","window","confirm","submitQueryParams","updatedParams","queryState","nextActivePage","pages","p","pIdx","id","parseInt","description","fieldsToFilter","filterable","filteredItems","passFilter","renderTable","renderPageContent","refreshData","Navigation","isOpened","setIsOpened","to","activeClassName","CustomStyles","cssVars","styles","vars","arr","dangerouslySetInnerHTML","__html","defaultAppName","changeFavicon","link","oldLink","head","App","firstLoad","setFirstLoad","setConfig","loadConfig","windowConfig","RESTool","remoteConfig","ConfigService","loadDefaultConfig","favicon","remoteUrl","validateConfig","appName","Provider","customStyles","scrollDuration","cosParameter","scrollY","scrollCount","oldTimestamp","performance","now","requestAnimationFrame","step","newTimestamp","Math","PI","scrollTo","round","cos","scrollToTop","exact","component","position","POSITION","TOP_CENTER","autoClose","draggable","Boolean","hostname","match","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.cd9bfdd2.chunk.js","sourcesContent":["import { IConfigInputField } from \"../common/models/config.model\";\r\n\r\nclass DataHelpers {\r\n\r\n  public extractDataByDataPath(data: any, dataPath: string, attr: string | null = null) {\r\n    if (!data || !dataPath) {\r\n      if (attr) {\r\n        return data[attr];\r\n      }\r\n      return data;\r\n    }\r\n\t\r\n    let extractedData: any = data;\r\n    const digProps: string[] = dataPath.split('.');\r\n\r\n    for (let prop of digProps) {\r\n      if (typeof extractedData[prop] !== 'undefined') {\r\n        extractedData = extractedData[prop];\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    if (!extractedData) {\r\n      return null;\r\n    }\r\n\r\n    if (attr) {\r\n      return extractedData[attr];\r\n    }\r\n\r\n    return extractedData;\r\n  }\r\n\r\n  public checkIfFieldIsObject(field: IConfigInputField): boolean {\r\n    if (field.type === 'object') {\r\n      return true;\r\n    }\r\n\r\n    if (field.type === 'array') {\r\n      if (!field.arrayType || field.arrayType === 'object') {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n}\r\n\r\nexport const dataHelpers = new DataHelpers();","import { TConfigMethod, IConfigInputField } from '../common/models/config.model';\r\nimport { dataHelpers } from '../helpers/data.helpers';\r\n\r\nexport type ResponseType = 'json' | 'text' | 'boolean' | 'status';\r\n\r\nexport interface IFetchParams {\r\n  origUrl: string\r\n  method?: TConfigMethod\r\n  headers?: any\r\n  queryParams?: IConfigInputField[]\r\n  rawData?: any\r\n  body?: any\r\n  responseType?: ResponseType\r\n}\r\n\r\nclass HttpService {\r\n  public baseUrl: string;\r\n  public unauthorizedRedirectUrl: string;\r\n  public errorMessageDataPath: string | string[];\r\n  public requestHeaders: any;\r\n\r\n  constructor(baseUrl: string = '', unauthorizedRedirectUrl: string = '', errorMessageDataPath: string = '') {\r\n    this.baseUrl = baseUrl || '';\r\n    this.unauthorizedRedirectUrl = unauthorizedRedirectUrl || '';\r\n    this.errorMessageDataPath = errorMessageDataPath || '';\r\n    this.requestHeaders = {};\r\n  }\r\n\r\n  private urlIsAbsolute(url: string) {\r\n    if (url.indexOf('http') === 0 || url.indexOf('https') === 0) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private replaceParamsInUrl(url: string, rawData?: any): string {\r\n    if (!rawData || typeof rawData !== 'object') {\r\n      return url;\r\n    }\r\n\r\n    let outputUrl = url;\r\n    \r\n    Object.keys(rawData).forEach((key) => {\r\n      const urlParamName = `:${key}`;\r\n      outputUrl = outputUrl.replace(urlParamName, rawData[key] as string);\r\n    });\r\n\r\n    return outputUrl;\r\n  }\r\n\r\n  private buildUrl(url: string, queryParams: IConfigInputField[] = [], rawData?: any): string {\r\n    if (!queryParams || !queryParams.length) {\r\n      return this.replaceParamsInUrl(url, rawData);\r\n    }\r\n\r\n    let outputUrl = url;\r\n    const params = [];\r\n\r\n    for (let param of queryParams) {\r\n      if (!param.name || typeof param.value === 'undefined') {\r\n        continue;\r\n      }\r\n\r\n      // TODO: Add docs to \"urlReplaceOnly\"\r\n      if (param.urlReplaceOnly) {\r\n        const urlParamName = `:${param.name}`;\r\n        outputUrl = outputUrl.replace(urlParamName, param.value as string);\r\n      } else {\r\n        params.push(`${param.name}=${param.value || ''}`);\r\n      }\r\n    }\r\n\r\n    if (params.length) {\r\n      const firstSeparator = url.indexOf('?') >= 0 ? '&' : '?';\r\n      return outputUrl + firstSeparator + params.join('&');\r\n    }\r\n\r\n    return outputUrl;\r\n  }\r\n\r\n  private buildRequest(params: IFetchParams): { url: string, params: any } {\r\n    const reqUrl: string = this.urlIsAbsolute(params.origUrl) ? params.origUrl : this.baseUrl + params.origUrl;\r\n    const finalUrl: string = this.buildUrl(reqUrl, params.queryParams, params.rawData);\r\n    const requestParams = {\r\n      method: params.method || 'get',\r\n      headers: Object.assign({}, this.requestHeaders, params.headers || {}),\r\n      body: params.method === 'post' || params.method === 'put' ? params.body : undefined\r\n    };\r\n\r\n    return {\r\n      url: finalUrl,\r\n      params: requestParams\r\n    };\r\n  }\r\n\r\n  private async getErrorMessage(res: Response | any): Promise<string> {\r\n    let errorMessage: string = '';\r\n\r\n    try {\r\n      const body = await res.json();\r\n\r\n      for (const path of this.errorMessageDataPath) {\r\n        const dataAtPath = dataHelpers.extractDataByDataPath(body, path);\r\n\r\n        if (dataAtPath) {\r\n          errorMessage = dataAtPath;\r\n        }\r\n      }\r\n    } catch {} // TODO: proper handling of errors (^.^)\r\n\r\n    return errorMessage && errorMessage.length ?\r\n        errorMessage :\r\n        `${res.status} - ${res.statusText || ''}`;\r\n  }\r\n\r\n  private async handleError(res: Response) {\r\n    // In case response status is \"Unauthorized\", redirect to relevant url\r\n    if (res.status === 401 && this.unauthorizedRedirectUrl) {\r\n      const redirectUrl: string = this.unauthorizedRedirectUrl.replace(':returnUrl', encodeURIComponent(document.location.href));\r\n      document.location.href = redirectUrl;\r\n      return;\r\n    }\r\n\r\n    throw new Error(await this.getErrorMessage(res));\r\n  }\r\n\r\n  private async makeRequest(url: string, params: any = {}, responseType: ResponseType = 'json') {\r\n    const res: Response = await fetch(url, Object.assign({}, params, {}));\r\n    \r\n    if (res.ok) {\r\n      switch (responseType) {\r\n        case 'json':\r\n          return await res.json();  \r\n        case 'text':\r\n          return await res.text();\r\n        case 'boolean':\r\n          return true;\r\n        default:\r\n          return true;\r\n      }\r\n    }\r\n\r\n    await this.handleError(res);\r\n  }\r\n\r\n  public async fetch({ method, origUrl, queryParams, rawData, body, headers, responseType }: IFetchParams) {\r\n    const { url, params } = this.buildRequest({ method, origUrl, queryParams, rawData, body, headers });\r\n    return await this.makeRequest(url, params, responseType);\r\n  }\r\n}\r\n\r\nexport default HttpService;\r\n","import HTTPService from './http.service';\r\nimport { IConfig } from '../common/models/config.model';\r\n\r\nconst httpService: HTTPService = new HTTPService();\r\n\r\nclass ConfigService extends HTTPService {\r\n\r\n  public async getRemoteConfig(url: string) {\r\n    if (url.endsWith('.js')) {\r\n      return (await import(/* webpackIgnore: true */url)).default;\r\n    }\r\n    return await httpService.fetch({\r\n      origUrl: url,\r\n    });\r\n  }\r\n\r\n  public async loadDefaultConfig() {\r\n    try {\r\n      return await this.getRemoteConfig('/config.json');\r\n    } catch (e) {\r\n      return (await this.getRemoteConfig('/config.js'));\r\n    }\r\n  }\r\n\r\n  public validateConfig(config: IConfig | null): { isValid: boolean, errorMessage: string | null } {\r\n    // TODO: Validate mandatory fields in config file\r\n    return {\r\n      isValid: true,\r\n      errorMessage: null\r\n    };\r\n  }\r\n\r\n}\r\n\r\nexport default new ConfigService();\r\n","import React from 'react';\r\nimport { IConfig, IConfigPage } from '../common/models/config.model';\r\nimport HttpService from '../services/http.service';\r\n\r\nexport interface IAppContext {\r\n  config: IConfig | null\r\n  activePage: IConfigPage | null\r\n  error: string | null\r\n  setError: (error: string | null) => void\r\n  setActivePage: (activePage: IConfigPage | null) => void\r\n  httpService: HttpService\r\n}\r\n\r\nexport const AppContext = React.createContext<IAppContext>({\r\n  config: null,\r\n  activePage: null,\r\n  error: null,\r\n  setError: () => {},\r\n  setActivePage: () => {},\r\n  httpService: new HttpService()\r\n});","import React from 'react';\r\nimport { AppContext } from '../app.context';\r\n\r\nexport const withAppContext = (Component: any) => {\r\n  return (props: any) => (\r\n    <AppContext.Consumer>    \r\n      {(context) => {\r\n        return <Component {...props} context={context} />\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport './loader.scss';\r\n\r\nexport const Loader = () => {\r\n  return (\r\n    <div className=\"app-loader cp-spinner cp-balls small\"></div>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport './button.scss';\r\n\r\ninterface IProps {\r\n  children: any\r\n  type?: 'submit' | 'button' | 'reset'\r\n  title?: string\r\n  className?: string\r\n  onClick?: (e: any) => void\r\n  color?: 'gray' | 'blue' | 'green' | 'red'\r\n}\r\n\r\nexport const Button = (props: IProps) => {\r\n  return (\r\n    <button {...props} className={`button ${props.className || ''} ${props.color || ''}`}>{props.children}</button>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport { IConfigDisplayField, IConfigCustomAction } from '../../common/models/config.model';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { Button } from '../button/button.comp';\r\n\r\nimport './table.scss';\r\n\r\ninterface IProps {\r\n  items: any[]\r\n  callbacks: {\r\n    delete: ((item: any) => void) | null\r\n    put: ((item: any) => void) | null\r\n    action: (item: any, action: IConfigCustomAction) => void\r\n  }\r\n  fields: IConfigDisplayField[]\r\n  customActions?: IConfigCustomAction[]\r\n}\r\n\r\nexport const Table = ({ items, fields, callbacks, customActions }: IProps) => {\r\n  function renderTableCell(origField: IConfigDisplayField, value: any) {\r\n    if (value && typeof value === 'object') {\r\n      return 'object';\r\n    }\r\n\r\n    switch (origField.type) {\r\n      case 'text':\r\n        return <span>{value}</span>;\r\n      case 'boolean':\r\n        return <div className={`bool ${value ? 'true' : 'false'}`}></div>;\r\n      case 'image':\r\n        return <img src={value || ''} alt={value || origField.label || origField.name} />;\r\n      case 'url':\r\n        const url: string = (origField.url || value || '').replace(`:${origField.name}`, value);\r\n        return <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{value}</a>;\r\n      case 'colorbox':\r\n        return <div className=\"colorbox\" style={{ backgroundColor: value }}></div>;\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"table-wrapper\">\r\n      <table className=\"pure-table\">\r\n        <thead>\r\n          <tr>\r\n            {\r\n              fields.map((field) => {\r\n                return <th key={`th_${field.name}`}>{field.label || field.name}</th>;\r\n              })\r\n            }\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n            items.map((item, rowIdx) => {\r\n              return (\r\n                <tr key={`tr_${rowIdx}`}>\r\n                  {\r\n                    fields.map((field, fieldIdx) => {\r\n                      const value = dataHelpers.extractDataByDataPath(item, field.dataPath, field.name);\r\n                      return <td key={`td_${rowIdx}_${fieldIdx}`}>{renderTableCell(field, value)}</td>\r\n                    })\r\n                  }\r\n                  <td>\r\n                    <div className=\"actions-wrapper\">\r\n                      {\r\n                        callbacks.put &&\r\n                        <Button onClick={() => callbacks.put?.(item)} title=\"Edit\">\r\n                          <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>\r\n                        </Button>\r\n                      }\r\n                      {\r\n                        (customActions && customActions.length > 0) &&\r\n                        customActions.map((action, idx) => (\r\n                          <Button key={`action_${rowIdx}_${idx}`} onClick={() => callbacks.action(item, action)} title={action.name}>\r\n                            <i className={`fa fa-${action.icon || 'cogs'}`} aria-hidden=\"true\"></i>\r\n                          </Button>\r\n                        ))\r\n                      }\r\n                      {\r\n                        callbacks.delete &&\r\n                        <Button onClick={() => callbacks.delete?.(item)} title=\"Delete\">\r\n                          <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n                        </Button>\r\n                      }\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })\r\n          }\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\n\r\nimport { IConfigDisplayField, IConfigCustomAction } from '../../common/models/config.model';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { Button } from '../button/button.comp';\r\n\r\nimport './cards.scss';\r\n\r\ninterface IProps {\r\n  items: any[]\r\n  callbacks: {\r\n    delete: ((item: any) => void) | null\r\n    put: ((item: any) => void) | null\r\n    action: (item: any, action: IConfigCustomAction) => void\r\n  }\r\n  fields: IConfigDisplayField[]\r\n  customActions?: IConfigCustomAction[]\r\n}\r\n\r\nexport const Cards = ({ items, fields, callbacks, customActions }: IProps) => {\r\n  function renderRow(origField: IConfigDisplayField, value: any) {\r\n    if (value && typeof value === 'object') {\r\n      return 'object';\r\n    }\r\n\r\n    switch (origField.type) {\r\n      case 'text':\r\n        return <span>{value}</span>;\r\n      case 'boolean':\r\n        return <div className={`bool ${value ? 'true' : 'false'}`}></div>;\r\n      case 'image':\r\n        return <img src={value || ''} alt={value || origField.label || origField.name} />;\r\n      case 'url':\r\n        const url: string = (origField.url || value || '').replace(`:${origField.name}`, value);\r\n        return <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{value}</a>;\r\n      case 'colorbox':\r\n        return <div className=\"colorbox\" style={{ backgroundColor: value }}></div>;\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"cards-wrapper\">\r\n      {\r\n        items.map((item, cardIdx) => {\r\n          return (\r\n            <div className=\"card\" key={`card_${cardIdx}`}>\r\n              {\r\n                fields.map((field, fieldIdx) => {\r\n                  const value = dataHelpers.extractDataByDataPath(item, field.dataPath, field.name);\r\n                  return (\r\n                    <div className={`card-row ${field.type}`} key={`card_${cardIdx}_${fieldIdx}`}>\r\n                      {\r\n                        field.type !== 'image' &&\r\n                        <label>{field.label || field.name}: </label>\r\n                      }\r\n                      {renderRow(field, value)}\r\n                    </div>\r\n                  );\r\n                })\r\n              }\r\n              <div className=\"actions-wrapper\">\r\n                {\r\n                  callbacks.put &&\r\n                  <Button onClick={() => callbacks.put?.(item)} title=\"Edit\">\r\n                    <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>\r\n                  </Button>\r\n                }\r\n                {\r\n                  (customActions && customActions.length > 0) &&\r\n                  customActions.map((action, idx) => (\r\n                    <Button key={`action_${cardIdx}_${idx}`} onClick={() => callbacks.action(item, action)} title={action.name}>\r\n                      <i className={`fa fa-${action.icon || 'cogs'}`} aria-hidden=\"true\"></i>\r\n                    </Button>\r\n                  ))\r\n                }\r\n                {\r\n                  callbacks.delete &&\r\n                  <Button onClick={() => callbacks.delete?.(item)} title=\"Delete\">\r\n                    <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n                  </Button>\r\n                }\r\n              </div>\r\n            </div>\r\n          );\r\n        })\r\n      }\r\n    </div>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport { orderBy } from 'natural-orderby';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport { IConfigInputField, IConfigOptionSource } from '../../common/models/config.model';\r\nimport { Button } from '../button/button.comp';\r\nimport { withAppContext } from '../withContext/withContext.comp';\r\nimport { IAppContext } from '../app.context';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\n\r\nimport './formRow.scss';\r\n\r\ninterface IProps {\r\n  context: IAppContext\r\n  field: IConfigInputField\r\n  onChange: (fieldName: string, value: any, submitAfterChange?: boolean) => void\r\n  showReset?: boolean\r\n  direction?: 'row' | 'column'\r\n}\r\n\r\nexport const FormRow = withAppContext(({ context, field, direction, showReset, onChange }: IProps) => {\r\n  const [optionSources, setOptionSources] = useState<any>({});\r\n  const { httpService, activePage } = context;\r\n  const pageHeaders: any = activePage?.requestHeaders || {};\r\n\r\n  async function loadOptionSourceFromRemote(fieldName: string, optionSource: IConfigOptionSource) {\r\n    try {\r\n      const { url, dataPath, actualMethod, requestHeaders } = optionSource;\r\n\r\n      if (!url) {\r\n        throw new Error(`URL option source (for field \"${fieldName}\") is empty.`);\r\n      }\r\n\r\n      const result = await httpService.fetch({\r\n        method: actualMethod || 'get',\r\n        origUrl: url,\r\n        queryParams: [],\r\n        headers: Object.assign({}, pageHeaders,  requestHeaders || {}),\r\n      });\r\n\r\n      const extractedData = dataHelpers.extractDataByDataPath(result, dataPath);\r\n\r\n      if (!extractedData || !extractedData.length) {\r\n        throw new Error(`Option source data is empty (for field \"${fieldName}\")`);\r\n      }\r\n\r\n      // Map option source to fields\r\n      const optionSourceData = extractedData.map((option: any, idx: number) => {\r\n        const { valuePath, displayPath } = optionSource;\r\n\r\n        if (typeof option === 'string') {\r\n          return option;\r\n        }\r\n\r\n        return {\r\n          display: displayPath && option[displayPath] ? option[displayPath] : `Option ${idx + 1}`,\r\n          value: valuePath && option[valuePath] ? option[valuePath] : `${idx}`,\r\n        };\r\n      });\r\n\r\n      setOptionSources({\r\n        ...optionSources,\r\n        [fieldName]: optionSourceData\r\n      });\r\n    } catch (e) {\r\n      toast.error(e.message);\r\n    }\r\n  }\r\n\r\n  function addItemToFieldArray(e: any, originalField: IConfigInputField) {\r\n    e.preventDefault();\r\n\r\n    onChange(field.name, [\r\n      ...(originalField.value || []),\r\n      ''\r\n    ]);\r\n  }\r\n\r\n  function removeItemToFieldArray(originalField: IConfigInputField, idx: number) {\r\n    const updatedArray = [\r\n      ...(originalField.value || [])\r\n    ];\r\n\r\n    updatedArray.splice(idx, 1);\r\n\r\n    onChange(field.name, updatedArray);\r\n  }\r\n\r\n  function renderArrayItems(originalField: IConfigInputField) {\r\n    const array: any[] = originalField.value || [];\r\n\r\n    return (\r\n      <div className=\"array-form\">\r\n        {\r\n          array.map((item, itemIdx) => {\r\n            const inputField = renderFieldInput({\r\n              value: item,\r\n              name: `${originalField.name}.${itemIdx}`,\r\n            } as IConfigInputField, (fieldName, value) => {\r\n              const updatedArray = (originalField.value || []).map((localValue: any, idx: number) => {\r\n                if (idx === itemIdx) {\r\n                  return value;\r\n                }\r\n                return localValue;\r\n              });\r\n\r\n              onChange(originalField.name, updatedArray);\r\n            });\r\n\r\n            return (\r\n              <div className=\"array-form-item\" key={`array_form_${itemIdx}`}>\r\n                {inputField}\r\n                <i title=\"Clear\" onClick={() => removeItemToFieldArray(originalField, itemIdx)} aria-label=\"Remove\" className=\"clear-input fa fa-times\"></i>\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n        <Button className=\"add-array-item\" onClick={(e) => addItemToFieldArray(e, originalField)} title=\"Add Item\">\r\n          <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderFieldInput(field: IConfigInputField, changeCallback: (fieldName: string, value: any, submitAfterChange?: boolean) => void) {\r\n    const inputProps = (defaultPlaceholder: string = '') => {\r\n      return {\r\n        value: field.value,\r\n        placeholder: field.placeholder || defaultPlaceholder,\r\n        disabled: field.readonly,\r\n        required: field.required,\r\n        onChange: (e: any) => changeCallback(field.name, e.target.value),\r\n      };\r\n    };\r\n\r\n    switch (field.type) {\r\n      case 'boolean':\r\n        return <input type=\"checkbox\" {...inputProps()} checked={field.value} onChange={(e) => changeCallback(field.name, e.target.checked, true)} />;\r\n      case 'select':\r\n        {\r\n          const { optionSource } = field;\r\n\r\n          if (optionSource && !optionSources[field.name]) {\r\n            loadOptionSourceFromRemote(field.name, optionSource);\r\n            return <select {...inputProps()}><option>-- Loading Options... --</option></select>\r\n          }\r\n\r\n          const sortBy = field.optionSource?.sortBy;\r\n          const finalOptions: { value: string, display: string }[] = optionSources[field.name] || field.options || [];\r\n          const sortedOptions = orderBy(finalOptions, typeof sortBy === 'string' ? [sortBy] : (sortBy || []));\r\n\r\n          return (\r\n            <select {...inputProps()}>\r\n              <option>-- Select --</option>\r\n              {\r\n                sortedOptions.map((option, idx) => {\r\n                  const key = `option_${idx}_`;\r\n                  if (typeof option !== 'object') {\r\n                    return <option key={`${key}_${option}`} value={option}>{option}</option>\r\n                  }\r\n                  return <option key={`${key}_${option.value}`} value={option.value}>{option.display || option.value}</option>\r\n                })\r\n              }\r\n            </select>\r\n          );\r\n        };\r\n      case 'object':\r\n        return <textarea {...inputProps('Enter JSON...')}></textarea>;\r\n      case 'array': {\r\n        const { arrayType, value } = field;\r\n        if (!value || !arrayType || arrayType === 'object') {\r\n          return <textarea {...inputProps('Enter JSON array...')}></textarea>;\r\n        }\r\n        return renderArrayItems(field);\r\n      }\r\n      case 'long-text':\r\n        return <textarea {...inputProps('Enter text...')}></textarea>;\r\n      case 'number':\r\n      case 'integer':\r\n        return <input type=\"number\"  {...inputProps('0')} onChange={(e) => changeCallback(field.name, e.target.valueAsNumber)} />;\r\n      case 'color':\r\n        return <input type=\"color\" {...inputProps('Enter color...')}/>;\r\n      case 'email':\r\n        return <input type=\"email\" {...inputProps('Enter email...')}/>;\r\n      case 'password':\r\n        return <input type=\"password\" {...inputProps('Enter password...')}/>;\r\n      case 'hidden':\r\n        return <input type=\"hidden\" value={field.value} />;\r\n      case 'file':\r\n        return <input type=\"file\" accept={field.accept || '*'} placeholder={field.placeholder || 'Select file...'} name={field.name || 'file'} disabled={field.readonly} required={field.required} />;\r\n      case 'note':\r\n        return <p className=\"note\">{field.value}</p>;\r\n      case 'date':\r\n        return <input type=\"date\" {...inputProps('Enter date...')}/>;\r\n      case 'text':\r\n      default:\r\n        return <input type=\"text\" {...inputProps('Enter text...')}/>;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={`form-row ${direction || 'row'}`}>\r\n      {\r\n        field.type !== 'hidden' &&\r\n        <label>{field.label || field.originalName}{field.required ? ' *' : ''}</label>\r\n      }\r\n      {renderFieldInput(field, onChange)}\r\n      {\r\n        (showReset && !field.readonly && field.value && field.value.length > 0) &&\r\n        <i title=\"Clear\" onClick={() => onChange(field.name, '', true)} aria-label=\"Clear\" className=\"clear-input fa fa-times\"></i>\r\n      }\r\n    </div>\r\n  );\r\n});\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport { IConfigInputField } from '../../common/models/config.model';\r\nimport { FormRow } from '../formRow/formRow.comp';\r\nimport { Button } from '../button/button.comp';\r\n\r\nimport './queryParams.scss';\r\n\r\ninterface IProps {\r\n  initialParams: IConfigInputField[]\r\n  submitCallback: (queryParams: IConfigInputField[]) => void\r\n}\r\n\r\nexport const QueryParams = ({ initialParams, submitCallback }: IProps) => {\r\n  const [queryParams, setQueryParams] = useState<IConfigInputField[]>(initialParams);\r\n\r\n  function submit(e?: any) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    submitCallback(queryParams);\r\n  }\r\n\r\n  function formChanged(fieldName: string, value: any, submitAfterChange?: boolean) {\r\n    const updatedQueryParams: IConfigInputField[] = [...queryParams].map((field) => {\r\n      if (field.name === fieldName) {\r\n        field.value = value;\r\n      }\r\n\r\n      return field;\r\n    });\r\n\r\n    setQueryParams(updatedQueryParams);\r\n\r\n    if (submitAfterChange) {\r\n      submit();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setQueryParams(initialParams);\r\n  }, [initialParams]);\r\n\r\n  if (!queryParams.length) {\r\n    return <React.Fragment></React.Fragment>;\r\n  }\r\n\r\n  return (\r\n    <section className=\"query-params-form\">\r\n      <h5>Query Params:</h5>\r\n      <form onSubmit={submit}>\r\n        {\r\n          queryParams.map((queryParam, idx) => {\r\n            return (\r\n              <FormRow \r\n                key={`query_param_${idx}`}\r\n                field={queryParam} \r\n                onChange={formChanged}\r\n                showReset={!queryParam.type || queryParam.type === 'text'}\r\n              />\r\n            );\r\n          })\r\n        }\r\n        <Button type=\"submit\" onClick={submit}>Submit</Button>\r\n      </form>\r\n    </section>\r\n  );\r\n};","import React, { Component, RefObject, ReactChild } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './popup.scss';\r\n\r\ninterface IPopupProps {\r\n  className?: string\r\n  style?: any\r\n  show: boolean\r\n  closeCallback: any\r\n  children: ReactChild\r\n  refCallback?: string | ((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null | undefined\r\n}\r\n\r\nlet portalRoot: HTMLDivElement = document.getElementById('popup-portal') as HTMLDivElement;\r\nif (!portalRoot) {\r\n  portalRoot = document.createElement('div');\r\n  portalRoot.setAttribute('id', 'popup-portal');\r\n  document.body.append(portalRoot);\r\n}\r\n\r\nclass PortalPopup extends Component {\r\n  private el: HTMLElement;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n    \r\n    this.el = document.createElement('div');\r\n  }\r\n  \r\n  componentDidMount = () => {\r\n    portalRoot.appendChild(this.el);\r\n  }\r\n  \r\n  componentWillUnmount = () => {\r\n    portalRoot.removeChild(this.el);\r\n  }\r\n\r\n  render() {\r\n    return ReactDOM.createPortal(this.props.children, this.el);\r\n  }\r\n}\r\n\r\nexport class Popup extends Component<IPopupProps> {\r\n  render() {\r\n    const style: any = Object.assign({}, { display: this.props.show ? 'block' : 'none' }, this.props.style || {});\r\n\r\n    return (\r\n      <PortalPopup>\r\n        {\r\n          this.props.show ? \r\n          <div className={`popup ${this.props.className || ''}`} style={style}>\r\n            <div className=\"overlay\" onClick={(e: any) => this.props.closeCallback(e)}></div>\r\n            <div className=\"popup-content\" ref={this.props.refCallback}>\r\n              {this.props.children}\r\n              <button title=\"Close\" className=\"close-popup\" onClick={(e: any) => this.props.closeCallback(e)}>\r\n                <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n              </button>\r\n            </div>\r\n          </div> :\r\n          null\r\n        }\r\n      </PortalPopup>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this._handleKeyDown.bind(this));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this._handleKeyDown.bind(this));\r\n  }\r\n\r\n  _handleKeyDown = (e: KeyboardEvent) => {\r\n    const { show, closeCallback } = this.props;\r\n    \r\n    if (show && e.keyCode === 27) {\r\n      closeCallback(e);\r\n    }\r\n  }\r\n};","import { IConfigInputField } from '../common/models/config.model';\r\n\r\nclass FileHelpers {\r\n\r\n  public isMultipartForm(fields: IConfigInputField[]): boolean {\r\n    for (const fieldIndex in fields) {\r\n      let field = fields[fieldIndex];\r\n\r\n      if (field.type === 'file') {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  \r\n}\r\n\r\nexport const fileHelpers = new FileHelpers();","import React, { useState, useEffect } from 'react';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport { Popup } from '../popup/popup.comp';\r\nimport {\r\n  IConfigInputField,\r\n  IConfigGetSingleMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod\r\n} from '../../common/models/config.model';\r\nimport { FormRow } from '../formRow/formRow.comp';\r\nimport { Button } from '../button/button.comp';\r\nimport { Loader } from '../loader/loader.comp';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { fileHelpers } from '../../helpers/file.helpers';\r\nimport { IAppContext } from '../app.context';\r\nimport { withAppContext } from '../withContext/withContext.comp';\r\n\r\nimport './formPopup.scss';\r\n\r\nconst flatten = require('flat');\r\nconst unflatten = require('flat').unflatten;\r\n\r\ninterface IProps {\r\n  context: IAppContext\r\n  title: string\r\n  fields: IConfigInputField[]\r\n  rawData?: any\r\n  getSingleConfig?: IConfigGetSingleMethod\r\n  methodConfig: IConfigPostMethod | IConfigPutMethod\r\n  closeCallback: (reloadData: boolean) => void\r\n  submitCallback: (body: any, containFiles: boolean) => void\r\n}\r\n\r\nexport const FormPopup = withAppContext(({ context, title, fields, rawData, getSingleConfig, methodConfig, submitCallback, closeCallback }: IProps) => {\r\n  const fieldsCopy: IConfigInputField[] = JSON.parse(JSON.stringify(fields));\r\n  const { httpService, activePage } = context;\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [formFields, setFormFields] = useState<IConfigInputField[]>([]);\r\n  const [finalRawData, setFinalRawData] = useState<any>(null);\r\n  const pageHeaders: any = activePage?.requestHeaders || {};\r\n\r\n  async function initFormFields() {\r\n    let finalRawData: any = rawData || {};\r\n\r\n    if (getSingleConfig && getSingleConfig.url) {\r\n      try {\r\n        const { url, requestHeaders, actualMethod, dataPath, queryParams } = getSingleConfig;\r\n        const result = await httpService.fetch({\r\n          method: actualMethod || 'get',\r\n          origUrl: url,\r\n          queryParams,\r\n          headers: Object.assign({}, pageHeaders,  requestHeaders || {}),\r\n          rawData,\r\n        });\r\n\r\n        const extractedData = dataHelpers.extractDataByDataPath(result, dataPath);\r\n\r\n        if (extractedData && typeof extractedData === 'object') {\r\n          finalRawData = extractedData;\r\n        }\r\n      } catch (e) {\r\n        console.error('Could not load single item\\'s data.', e);\r\n        toast.error('Could not load single item\\'s data.');\r\n      }\r\n    }\r\n\r\n    setFinalRawData(finalRawData); // Store the raw data for later.\r\n\r\n    const flattenData = flatten(finalRawData || {});\r\n\r\n    setFormFields(fieldsCopy.map((field) => {\r\n      let key = field.name;\r\n\r\n      field.originalName = field.name;\r\n\r\n      if (field.dataPath) {\r\n        key = `${field.dataPath}.${field.name}`;\r\n      }\r\n\r\n      // Changing field name to include datapath\r\n      // This will use us later for unflatten the final object\r\n      field.name = key;\r\n\r\n      if (dataHelpers.checkIfFieldIsObject(field)) {\r\n        if (finalRawData[key] || field.value) {\r\n          field.value = JSON.stringify(finalRawData[key] || field.value, null, '  ') || '';\r\n        }\r\n        return field;\r\n      }\r\n\r\n      if (field.type === 'array') {\r\n        field.value = finalRawData[key] || field.value || [];\r\n        return field;\r\n      }\r\n\r\n      if (flattenData[key]) {\r\n        field.value = flattenData[key];\r\n      } else {\r\n        // important in order to prevent controlled / uncontrolled components error\r\n        field.value = field.value || '';\r\n      }\r\n\r\n      return field;\r\n    }));\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  async function submitForm(e: any) {\r\n    e.preventDefault();\r\n\r\n    const finalObject: any = (methodConfig as IConfigPutMethod).includeOriginalFields ? Object.assign({}, finalRawData) : {};\r\n    const formData = new FormData();\r\n    const containFiles: boolean = fileHelpers.isMultipartForm(formFields);\r\n    let validationError = null;\r\n\r\n    formFields.forEach((field) => {\r\n      if (field.type === 'file') {\r\n        const fileInput: any = document.querySelector(`input[name=\"${field.name || 'file'}\"]`) as HTMLInputElement;\r\n\r\n        if (fileInput.files.length > 0) {\r\n          const firstFile = fileInput.files[0];\r\n          formData.append(field.name || 'file', firstFile, firstFile.name);\r\n        }\r\n        return;\r\n      }\r\n\r\n      finalObject[field.name] = field.value;\r\n\r\n      if (containFiles) {\r\n        formData.append(field.name, field.value);\r\n      }\r\n\r\n      if (field.required && field.type !== 'boolean' && !field.value) {\r\n        validationError = 'Please fill up all required fields.';\r\n      }\r\n\r\n      if (dataHelpers.checkIfFieldIsObject(field) && field.value) {\r\n        try {\r\n          finalObject[field.name] = JSON.parse(field.value);\r\n        } catch (e) {\r\n          validationError = `Invalid JSON for field \"${field.name}\".`;\r\n        }\r\n      }\r\n\r\n      if (field.type === 'boolean') {\r\n        finalObject[field.name] = field.value || false;\r\n      }\r\n\r\n      if (field.type === 'encode') {\r\n        finalObject[field.name] = encodeURIComponent(field.value);\r\n      }\r\n    });\r\n\r\n    if (validationError) {\r\n      toast.error(validationError);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const body = containFiles ? formData : unflatten(finalObject);\r\n      await submitCallback(body, containFiles);\r\n\r\n      toast.success('Great Success!');\r\n\r\n      closeCallback(true);\r\n    } catch (e) {\r\n      toast.error(e.message);\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  function formChanged(fieldName: string, value: any) {\r\n    let updatedFormFields: IConfigInputField[] = JSON.parse(JSON.stringify(formFields));\r\n\r\n    updatedFormFields = updatedFormFields.map((field: IConfigInputField) => {\r\n      if (field.name === fieldName) {\r\n        field.value = value;\r\n      }\r\n\r\n      return field;\r\n    });\r\n\r\n    setFormFields(updatedFormFields);\r\n  }\r\n\r\n  useEffect(() => {\r\n    initFormFields();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <Popup\r\n      show={true}\r\n      className=\"form-popup\"\r\n      closeCallback={() => closeCallback(false)}\r\n    >\r\n      <React.Fragment>\r\n        <h2>{title}</h2>\r\n        <section>\r\n          {\r\n            loading ?\r\n            <Loader /> :\r\n            <form onSubmit={submitForm}>\r\n              {\r\n                formFields.map((field, idx) => {\r\n                  return (\r\n                    <FormRow\r\n                      key={`field_${idx}`}\r\n                      field={field}\r\n                      onChange={formChanged}\r\n                      showReset={!field.type || field.type === 'text'}\r\n                    />\r\n                  );\r\n                })\r\n              }\r\n              <div className=\"buttons-wrapper center\">\r\n                <Button type=\"submit\" onClick={submitForm} color=\"green\">Submit</Button>\r\n              </div>\r\n            </form>\r\n          }\r\n        </section>\r\n      </React.Fragment>\r\n    </Popup>\r\n  );\r\n});\r\n","import React from 'react';\r\n\r\nimport './filterField.scss';\r\n\r\ninterface IProps {\r\n  onChange: (filter: string) => void\r\n}\r\n\r\nexport const FilterField = ({ onChange }: IProps) => {\r\n  return (\r\n    <section className=\"filter-wrapper\">\r\n      <h5>Filter:</h5>\r\n      <div className=\"form-row\">\r\n        <input type=\"text\" placeholder=\"Search...\" onChange={(e) => onChange(e.target.value.toLowerCase())} />\r\n      </div>\r\n    </section>\r\n  );\r\n};","import React, { useEffect, useState } from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport * as QueryString from 'query-string';\r\nimport { toast } from 'react-toastify';\r\nimport { orderBy } from 'natural-orderby';\r\n\r\nimport { IAppContext } from '../app.context';\r\nimport { IConfigPage, IConfigMethods, IConfigGetAllMethod, IConfigPostMethod, IConfigPutMethod, IConfigDeleteMethod, IConfigInputField, IConfigCustomAction, IConfigGetSingleMethod } from '../../common/models/config.model';\r\nimport { withAppContext } from '../withContext/withContext.comp';\r\nimport { Loader } from '../loader/loader.comp';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { Table } from '../table/table.comp';\r\nimport { Cards } from '../cards/cards.comp';\r\nimport { QueryParams } from '../queryParams/queryParams.comp';\r\nimport { Button } from '../button/button.comp';\r\nimport { FormPopup } from '../formPopup/formPopup.comp';\r\nimport { FilterField } from '../filterField/filterField.comp';\r\n\r\nimport './page.scss';\r\n\r\ninterface IProps {\r\n  context: IAppContext\r\n}\r\n\r\ninterface IPopupProps {\r\n  type: 'add' | 'update' | 'action'\r\n  title: string\r\n  config: IConfigPostMethod | IConfigPutMethod\r\n  submitCallback: (body: any, containFiles: boolean) => void\r\n  getSingleConfig?: IConfigGetSingleMethod\r\n  rawData?: {}\r\n}\r\n\r\nconst PageComp = ({ context }: IProps) => {\r\n  const { page } = useParams();\r\n  const { push, location } = useHistory();\r\n  const { activePage, error, setError, httpService } = context;\r\n  const pageHeaders: any = activePage?.requestHeaders || {};\r\n  const pageMethods: IConfigMethods | undefined = activePage?.methods;\r\n  const customActions: IConfigCustomAction[] = activePage?.customActions || [];\r\n  const getAllConfig: IConfigGetAllMethod | undefined = pageMethods?.getAll;\r\n  const getSingleConfig: IConfigGetSingleMethod | undefined = pageMethods?.getSingle;\r\n  const postConfig: IConfigPostMethod | undefined = pageMethods?.post;\r\n  const putConfig: IConfigPutMethod | undefined = pageMethods?.put;\r\n  const deleteConfig: IConfigDeleteMethod | undefined = pageMethods?.delete;\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [openedPopup, setOpenedPopup] = useState<null | IPopupProps>(null);\r\n  const [queryParams, setQueryParams] = useState<IConfigInputField[]>(getAllConfig?.queryParams || []);\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const [filter, setFilter] = useState<string>('');\r\n\r\n  function closeFormPopup(refreshData: boolean = false) {\r\n    setOpenedPopup(null);\r\n\r\n    if (refreshData === true) {\r\n      getAllRequest();\r\n    }\r\n  }\r\n\r\n  async function openEditPopup(rawData: any) {\r\n    const params: IPopupProps = {\r\n      rawData,\r\n      type: 'update',\r\n      title: 'Update Item',\r\n      config: putConfig as IConfigPutMethod,\r\n      getSingleConfig,\r\n      submitCallback: async (body: any, containFiles: boolean) => {\r\n        return await updateItem(body, rawData, containFiles);\r\n      }\r\n    };\r\n\r\n    setOpenedPopup(params);\r\n  }\r\n\r\n  function openCustomActionPopup(rawData: any, action: IConfigCustomAction) {\r\n    const params: IPopupProps = {\r\n      rawData,\r\n      type: 'action',\r\n      title: action.name || 'Custom Action',\r\n      config: action as IConfigCustomAction,\r\n      submitCallback: async (body: any, containFiles: boolean) => {\r\n        return await performAction(body, rawData, action, containFiles);\r\n      }\r\n    };\r\n\r\n    setOpenedPopup(params);\r\n  }\r\n\r\n  async function performAction(body: any, rawData: any, action: IConfigCustomAction, containFiles: boolean) {\r\n    const { url, requestHeaders, actualMethod } = action;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || 'put',\r\n      origUrl: url,\r\n      rawData,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { 'content-type': 'application/json' })\r\n      },\r\n      responseType: 'boolean'\r\n    });\r\n  }\r\n\r\n  function extractQueryParams(): IConfigInputField[] {\r\n    const parsedParams = QueryString.parse(location.search);\r\n    const finalQueryParams: IConfigInputField[] = (getAllConfig?.queryParams || []).map((queryParam) => {\r\n      if (typeof parsedParams[queryParam.name] !== 'undefined') {\r\n        queryParam.value = queryParam.type === 'boolean' ? (parsedParams[queryParam.name] === 'true') : decodeURIComponent(parsedParams[queryParam.name] as any);\r\n      } else {\r\n        queryParam.value = queryParam.value || '';\r\n      }\r\n      return queryParam;\r\n    });\r\n\r\n    return finalQueryParams\r\n  }\r\n\r\n  async function getAllRequest() {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      if (!getAllConfig) {\r\n        throw new Error('Get all method is not defined.');\r\n      }\r\n\r\n      const { url, requestHeaders, actualMethod, dataPath, sortBy, dataTransform } = getAllConfig;\r\n      const result = await httpService.fetch({\r\n        method: actualMethod || 'get',\r\n        origUrl: url,\r\n        queryParams: extractQueryParams(),\r\n        headers: Object.assign({}, pageHeaders, requestHeaders || {})\r\n      });\r\n      let extractedData = dataHelpers.extractDataByDataPath(result, dataPath);\r\n\r\n      if (!extractedData) {\r\n        throw new Error('Could not extract data from response.');\r\n      }\r\n\r\n      if (!Array.isArray(extractedData)) {\r\n        throw new Error('Extracted data is invalid.');\r\n      }\r\n\r\n      if (typeof dataTransform === 'function') {\r\n        extractedData = await dataTransform(extractedData);\r\n      }\r\n\r\n      const orderedItems = orderBy(extractedData, typeof sortBy === 'string' ? [sortBy] : (sortBy || []));\r\n\r\n      setItems(orderedItems);\r\n    } catch (e) {\r\n      setError(e.message);\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  async function addItem(body: any, containFiles?: boolean) {\r\n    if (!postConfig) {\r\n      throw new Error('Post method is not defined.');\r\n    }\r\n\r\n    const { url, requestHeaders, actualMethod } = postConfig;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || 'post',\r\n      origUrl: url,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { 'content-type': 'application/json' })\r\n      },\r\n      responseType: 'boolean'\r\n    });\r\n  }\r\n\r\n  async function updateItem(body: any, rawData: any, containFiles?: boolean) {\r\n    if (!putConfig) {\r\n      throw new Error('Put method is not defined.');\r\n    }\r\n\r\n    const { url, requestHeaders, actualMethod } = putConfig;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || 'put',\r\n      origUrl: url,\r\n      rawData,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { 'content-type': 'application/json' })\r\n      },\r\n      responseType: 'boolean'\r\n    });\r\n  }\r\n\r\n  async function deleteItem(item: any) {\r\n    const approved: boolean = window.confirm('Are you sure you want to delete this item?');\r\n\r\n    if (!approved) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (!deleteConfig) {\r\n        throw new Error('Delete method is not defined.');\r\n      }\r\n\r\n      const { url, requestHeaders, actualMethod } = deleteConfig;\r\n      const success = await httpService.fetch({\r\n        method: actualMethod || 'delete',\r\n        origUrl: url,\r\n        rawData: item,\r\n        headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n        responseType: 'boolean'\r\n      });\r\n\r\n      if (success) {\r\n        getAllRequest();\r\n      }\r\n    } catch (e) {\r\n      toast.error(e.message);\r\n    }\r\n  }\r\n\r\n  function submitQueryParams(updatedParams: IConfigInputField[]) {\r\n    setQueryParams(updatedParams);\r\n\r\n    if (loading) {\r\n      return;\r\n    }\r\n\r\n    // Building query string\r\n    const queryState: string = queryParams.map((queryParam, idx) => {\r\n      return `${idx === 0 ? '?' : ''}${queryParam.name}=${encodeURIComponent(queryParam.value || '')}`;\r\n    }).join('&');\r\n\r\n    // Pushing query state to url\r\n    push(queryState);\r\n  }\r\n\r\n  function renderTable() {\r\n    if (loading) {\r\n      return <Loader />;\r\n    }\r\n\r\n    const fields = getAllConfig?.fields || getAllConfig?.display?.fields || [];\r\n    const fieldsToFilter = fields.filter((field) => (field.filterable)).map((field) => field.name);\r\n    let filteredItems = items;\r\n\r\n    if (filter && fieldsToFilter.length) {\r\n      filteredItems = items.filter((item) => {\r\n        let passFilter = false;\r\n        fieldsToFilter.forEach((fieldName) => {\r\n          const value = item[fieldName];\r\n          if (typeof value === 'string' && value.toLowerCase().indexOf(filter) >= 0) {\r\n            passFilter = true;\r\n          }\r\n        })\r\n        return passFilter;\r\n      });\r\n    }\r\n\r\n    if (!filteredItems.length) {\r\n      return <div className=\"app-error\">Nothing to see here. Result is empty.</div>;\r\n    }\r\n\r\n    const callbacks = {\r\n      delete: deleteConfig ? deleteItem : null,\r\n      put: putConfig ? openEditPopup : null,\r\n      action: customActions.length ? openCustomActionPopup : () => {},\r\n    };\r\n\r\n    if (getAllConfig?.display.type === 'cards') {\r\n      return (\r\n        <Cards\r\n          callbacks={callbacks}\r\n          fields={fields}\r\n          items={filteredItems}\r\n          customActions={customActions}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Table\r\n        callbacks={callbacks}\r\n        fields={fields}\r\n        items={filteredItems}\r\n        customActions={customActions}\r\n      />\r\n    );\r\n  }\r\n\r\n  function renderPageContent() {\r\n    const fields = getAllConfig?.fields || getAllConfig?.display?.fields || [];\r\n    const fieldsToFilter = fields.filter((field) => (field.filterable)).map((field) => field.name);\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <QueryParams\r\n          initialParams={queryParams}\r\n          submitCallback={submitQueryParams}\r\n        />\r\n        {\r\n          fieldsToFilter.length > 0 &&\r\n          <FilterField onChange={setFilter} />\r\n        }\r\n        {\r\n          error ?\r\n          <div className=\"app-error\">{error}</div> :\r\n          renderTable()\r\n        }\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    const nextActivePage: IConfigPage | null = context?.config?.pages?.filter((p, pIdx) => p.id === page || (pIdx + 1) === parseInt(page || ''))[0] || null;\r\n    context.setActivePage(nextActivePage);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    setQueryParams(extractQueryParams());\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activePage]);\r\n\r\n  useEffect(() => {\r\n    // Load data when query params changed\r\n    getAllRequest();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [queryParams]);\r\n\r\n  return (\r\n    <div className=\"app-page\">\r\n      <header className=\"app-page-header\">\r\n        <hgroup>\r\n          <h2>{activePage?.name}</h2>\r\n          {\r\n            activePage?.description &&\r\n            <h4>{activePage?.description}</h4>\r\n          }\r\n        </hgroup>\r\n        {\r\n          postConfig &&\r\n          <Button className=\"add-item\" color=\"green\" onClick={() => setOpenedPopup({ type: 'add', title: 'Add Item', config: postConfig, submitCallback: addItem })}>+ Add Item</Button>\r\n        }\r\n      </header>\r\n      <main className=\"app-page-content\">\r\n        {renderPageContent()}\r\n      </main>\r\n      {\r\n        openedPopup &&\r\n        <FormPopup\r\n          title={openedPopup.title}\r\n          closeCallback={closeFormPopup}\r\n          submitCallback={openedPopup.submitCallback}\r\n          fields={openedPopup.config?.fields || []}\r\n          rawData={openedPopup.rawData}\r\n          getSingleConfig={openedPopup.getSingleConfig}\r\n          methodConfig={openedPopup.config}\r\n        />\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const Page = withAppContext(PageComp);\r\n","import React, { useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { IAppContext } from '../app.context';\r\nimport { withAppContext } from '../withContext/withContext.comp';\r\nimport { Button } from '../button/button.comp';\r\n\r\nimport './navigation.scss';\r\n\r\ninterface IProps {\r\n  context: IAppContext\r\n}\r\n\r\nconst NavigationComp = ({ context: { config } }: IProps) => {\r\n  const [isOpened, setIsOpened] = useState<boolean>(false);\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {\r\n          isOpened ? \r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i> : \r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        }\r\n      </Button>\r\n\r\n      <div className={`app-nav-wrapper ${isOpened ? 'opened' : ''}`}>\r\n        <div className=\"app-nav-links\">\r\n          {\r\n            (config?.pages || []).map((page, idx) => (\r\n              <NavLink to={`/${page.id || idx + 1}`} activeClassName=\"active\" key={`page_${idx}`} onClick={() => setIsOpened(false)}>{page.name}</NavLink>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport const Navigation = withAppContext(NavigationComp);","import React from 'react';\r\nimport { ICustomStyles } from '../../common/models/config.model';\r\n\r\ninterface IProps {\r\n  styles: ICustomStyles\r\n}\r\n\r\nexport const CustomStyles = ({ styles }: IProps) => {\r\n  const cssVars = styles.vars || {};\r\n  const arr = [];\r\n  \r\n  for (const key in cssVars) {\r\n    arr.push(`--${key}: ${(cssVars as any)[key]}`);\r\n  }\r\n\r\n  return (\r\n    <style dangerouslySetInnerHTML={{ __html: `\r\n      :root {\r\n        ${arr.join(';')}\r\n      }\r\n    ` }}>\r\n    </style>\r\n  );\r\n};","import React, { useEffect, useState } from 'react';\r\nimport { HashRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport ConfigService from '../services/config.service';\r\nimport { IConfig, IConfigPage } from '../common/models/config.model';\r\nimport { Page } from '../components/page/page.comp';\r\nimport { Navigation } from '../components/navigation/navigation.comp';\r\nimport { AppContext } from './app.context';\r\nimport HttpService from '../services/http.service';\r\nimport { CustomStyles } from './customStyles/customStyles.comp';\r\n\r\nimport './app.scss';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst httpService = new HttpService();\r\nconst defaultAppName: string = 'RESTool App';\r\n\r\nfunction changeFavicon(src: string) {\r\n  const link = document.createElement('link');\r\n  const oldLink = document.getElementById('favicon');\r\n  link.id = 'favicon';\r\n  link.rel = 'shortcut icon';\r\n  link.href = src;\r\n  if (oldLink) {\r\n   document.head.removeChild(oldLink);\r\n  }\r\n  document.head.appendChild(link);\r\n }\r\n\r\nfunction App() {\r\n  const [firstLoad, setFirstLoad] = useState<boolean>(true);\r\n  const [config, setConfig] = useState<IConfig | null>(null);\r\n  const [activePage, setActivePage] = useState<IConfigPage | null>(config?.pages?.[0] || null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  async function loadConfig(url?: string): Promise<void> {\r\n    try {\r\n      const windowConfig = (window as any).RESTool?.config;\r\n      let remoteConfig: IConfig; \r\n      // Try to load config from window object first\r\n      if (!url && windowConfig) {\r\n        remoteConfig = Object.assign({}, windowConfig, {});\r\n      } else {\r\n        remoteConfig = url ? await ConfigService.getRemoteConfig(url) : await ConfigService.loadDefaultConfig();\r\n      }\r\n\r\n      // Setting global config for httpService\r\n      httpService.baseUrl = remoteConfig.baseUrl || '';\r\n      httpService.errorMessageDataPath = remoteConfig.errorMessageDataPath || '';\r\n      httpService.unauthorizedRedirectUrl = remoteConfig.unauthorizedRedirectUrl || '';\r\n      httpService.requestHeaders = remoteConfig.requestHeaders || {};\r\n      document.title = remoteConfig.name || defaultAppName;\r\n\r\n      if (remoteConfig?.favicon) {\r\n        changeFavicon(remoteConfig.favicon);\r\n      }\r\n\r\n      if (remoteConfig?.remoteUrl) {\r\n        return await loadConfig(remoteConfig.remoteUrl);\r\n      }\r\n\r\n      setConfig(remoteConfig);\r\n    } catch (e) {\r\n      console.error('Could not load config file', e);\r\n    }\r\n\r\n    setFirstLoad(false);\r\n  }\r\n\r\n  function scrollToTop(scrollDuration: number = 250) {\r\n    var cosParameter = window.scrollY / 2,\r\n    scrollCount = 0,\r\n    oldTimestamp = performance.now();\r\n\r\n    function step (newTimestamp: number) {\r\n        scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\r\n\r\n        if (scrollCount >= Math.PI) {\r\n          window.scrollTo(0, 0);\r\n        }\r\n\r\n        if (window.scrollY === 0) {\r\n          return;\r\n        }\r\n\r\n        window.scrollTo(0, Math.round(cosParameter + cosParameter * Math.cos(scrollCount)));\r\n        oldTimestamp = newTimestamp;\r\n        window.requestAnimationFrame(step);\r\n    }\r\n\r\n    window.requestAnimationFrame(step);\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadConfig();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const { isValid, errorMessage } = ConfigService.validateConfig(config);\r\n    if (!isValid) {\r\n      setError(errorMessage);\r\n      return;\r\n    }\r\n  }, [config]);\r\n\r\n  const appName: string = config?.name || defaultAppName;\r\n\r\n  return (\r\n    <div className=\"restool-app\">\r\n      {\r\n        !config ?\r\n        <div className=\"app-error\">\r\n          {firstLoad ? 'Loading Configuration...' : 'Could not find config file.'}\r\n        </div> :\r\n        <AppContext.Provider value={{ config, activePage, setActivePage, error, setError, httpService }}>\r\n          {\r\n            config.customStyles &&\r\n            <CustomStyles\r\n              styles={config.customStyles}\r\n            />\r\n          }\r\n          <Router>\r\n            <aside>\r\n              <h1 title={appName} onClick={() => scrollToTop()}>{appName}</h1>\r\n              {\r\n                <Navigation />\r\n              }\r\n            </aside>\r\n            {\r\n              config &&\r\n              <Switch>\r\n                <Route exact path=\"/:page\" component={Page} />\r\n                <Redirect path=\"/\" to={`/${config?.pages?.[0]?.id || '1'}`} />\r\n              </Switch>\r\n            }\r\n            <ToastContainer\r\n              position={toast.POSITION.TOP_CENTER}\r\n              autoClose={4000}\r\n              draggable={false}\r\n            />\r\n          </Router>\r\n        </AppContext.Provider>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config: any) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config: any) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config: any) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport './index.scss';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}